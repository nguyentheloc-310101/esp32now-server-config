<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="../../index.css" />
    <link
      rel="stylesheet"
      href="home.css" />
    <title>Smart Home</title>
  </head>
  <body>
    <!-- SIDEBAR -->
    <section id="sidebar">
      <a
        href="#"
        class="brand">
        <img
          class="logo"
          src="../../../public/images/logo2.png" />
        <span class="text">Smart Home</span>
      </a>
      <ul class="side-menu top">
        <li class="active">
          <a href="../home/home.html">
            <img
              class="bx sidebar-icon"
              src="../../../public/icons/bxs-dashboard.svg" />
            <span class="text">Dashboard</span>
          </a>
        </li>
        <li>
          <a href="../devices/devices.html">
            <img
              class="bx sidebar-icon"
              src="../../../public/icons/bx-devices.svg" />
            <span class="text">Devices</span>
          </a>
        </li>
        <li>
          <a href="../wifi-config/wifi-config.html">
            <img
              class="bx sidebar-icon"
              src="../../../public/icons/bx-wifi.svg" />
            <span class="text">Wifi configuration</span>
          </a>
        </li>
      </ul>
    </section>
    <!-- SIDEBAR -->

    <!-- CONTENT -->
    <section id="content">
      <!-- NAVBAR -->
      <nav>
        <i class="bx bx-menu">
          <img
            class="bx sidebar-icon"
            src="../../../public/icons/bx-menu.svg" />
        </i>
        <a
          href="#"
          class="nav-link"></a>
        <form action="#">
          <div class="form-input">
            <input
              type="search"
              placeholder="Search..." />
            <button
              type="submit"
              class="search-btn">
              <img
                class="bx sidebar-icon"
                src="../../../public/icons/bx-search.svg" />
            </button>
          </div>
        </form>
      </nav>
      <!-- NAVBAR -->

      <!-- MAIN -->
      <main>
        <div class="head-title">
          <div class="left">
            <h1>Dashboard</h1>
            <ul class="breadcrumb">
              <li>
                <a href="#">Dashboard</a>
              </li>
              <li>
                <i class="bx bx-chevron-right">
                  <img
                    class="bx sidebar-icon"
                    src="../../../public/icons/bx-chevron-right.svg" />
                </i>
              </li>
              <li>
                <a
                  class="active"
                  href="#"
                  >Home</a
                >
              </li>
            </ul>
          </div>
        </div>

        <ul class="box-info">
          <li>
            <img
              class="bx icon-statistic"
              src="../../../public/icons/bx-temp.svg" />
            <span class="text">
              <h3 id="temperature"></h3>
              <p>Temperature (°C)</p>
            </span>
          </li>
          <li>
            <img
              class="bx icon-statistic"
              src="../../../public/icons/bx-humid.svg" />
            <span class="text">
              <h3 id="humidity"></h3>
              <p>Humidity (%)</p>
            </span>
          </li>
          <li>
            <i class="bx bxs-dollar-circle">
              <img
                class="bx icon-statistic"
                src="../../../public/icons//co2-icon.svg" />
            </i>
            <span class="text">
              <h3 id="co2"></h3>
              <p>Carbon dioxide (ppm)</p>
            </span>
          </li>
        </ul>

        <div class="table-data">
          <div class="order">
            <div>
              <h3>Devices status</h3>
              <div class="container-device-control">
                <div class="card-home-device">
                  <div class="Frame165">
                    <div class="small-bg-img">
                      <div
                        class="Rectangle63"
                        style="
                          width: 60px;
                          height: 60px;
                          left: 0px;
                          top: 0px;
                          position: absolute;
                          background: #f7f6ff;
                          border-radius: 15px;
                        "></div>
                      <div
                        class="Idea1"
                        style="
                          width: 36px;
                          height: 36px;
                          padding-left: 2.18px;
                          padding-right: 2.18px;
                          left: 12px;
                          top: 12px;
                          position: absolute;
                          justify-content: center;
                          align-items: center;
                          display: inline-flex;
                        ">
                        <img
                          class="bx icon-statistic"
                          src="../../../public/icons/bulb.svg" />
                      </div>
                    </div>
                    <div
                      class="status-device"
                      id="status-device1"></div>
                  </div>
                  <div class="Frame167">
                    <div
                      class="CentralLight"
                      style="color: #272727; font-size: 18px">
                      Light Bulb
                    </div>
                    <label
                      class="switch"
                      id="switch1">
                      <input
                        type="checkbox"
                        id="checkbox1" />
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
                <div class="card-home-device">
                  <div class="Frame165">
                    <div class="small-bg-img">
                      <div
                        class="Rectangle63"
                        style="
                          width: 60px;
                          height: 60px;
                          left: 0px;
                          top: 0px;
                          position: absolute;
                          background: #f7f6ff;
                          border-radius: 15px;
                        "></div>
                      <div
                        class="Idea1"
                        style="
                          width: 36px;
                          height: 36px;
                          padding-left: 2.18px;
                          padding-right: 2.18px;
                          left: 12px;
                          top: 12px;
                          position: absolute;
                          justify-content: center;
                          align-items: center;
                          display: inline-flex;
                        ">
                        <img
                          class="bx icon-statistic"
                          src="../../../public/icons/fan.svg" />
                      </div>
                    </div>
                    <div
                      class="status-device"
                      id="status-device2"></div>
                  </div>
                  <div class="Frame167">
                    <div
                      class="CentralLight"
                      style="color: #272727; font-size: 18px">
                      Fan
                    </div>
                    <label
                      class="switch"
                      id="switch2">
                      <input
                        type="checkbox"
                        id="checkbox2" />
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="todo">
            <div class="">
              <h3>Power consumption and cost this month:</h3>
              <ul class="box-info">
                <li>
                  <i class="bx bxs-consumption-circle">
                    <img
                      class="bx icon-statistic"
                      src="../../../public/icons/bxs-battery-charging.svg" />
                  </i>
                  <span class="text">
                    <h3 id="powerConsumption"></h3>
                    <p>Kw</p>
                  </span>
                </li>
                <li>
                  <i class="bx bxs-consumption-circle">
                    <img
                      class="bx icon-statistic"
                      src="../../../public/icons/bxs-battery-charging.svg" />
                  </i>
                  <span class="text">
                    <h3 id="cost"></h3>
                    <p>VNĐ</p>
                  </span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </main>
      <!-- MAIN -->
    </section>
    <!-- CONTENT -->

    <script src="../../index.js"></script>
    <script src="home.js"></script>
    <script>
      fetch('home.json')
        .then((response) => response.json())
        .then((data) => {
          // Update HTML elements with JSON data
          document.getElementById('temperature').textContent = data.temperature;
          document.getElementById('humidity').textContent = data.humidity;
          document.getElementById('co2').textContent = data.co2;
          document.getElementById('powerConsumption').textContent =
            data.powerConsumption;
          document.getElementById('cost').textContent = data.cost;

          // Update the status of devices based on the JSON data
          const statusDevice1 = data.device1;
          const statusDevice2 = data.device2;

          const statusDevice1Element =
            document.getElementById('status-device1');
          const statusDevice2Element =
            document.getElementById('status-device2');

          statusDevice1Element.textContent = statusDevice1;
          statusDevice2Element.textContent = statusDevice2;

          // Update the toggle switch states based on the JSON data
          const switchDevice1 = document.getElementById('checkbox1');
          const switchDevice2 = document.getElementById('checkbox2');

          switchDevice1.checked = statusDevice1 === 'ON';
          switchDevice2.checked = statusDevice2 === 'ON';

          // Update card background color based on device status
          updateCardBackground(switchDevice1, statusDevice1 === 'ON');
          updateCardBackground(switchDevice2, statusDevice2 === 'ON');
        })
        .catch((error) => console.error('Error fetching data:', error));

      // Function to update card background color
      function updateCardBackground(switchElement, isOn) {
        const cardElement = switchElement.closest('.card-home-device');
        const frame165 = cardElement.querySelector('.Frame165');
        const frame167 = cardElement.querySelector('.Frame167');

        if (isOn) {
          cardElement.style.backgroundColor = '#C3DBFF';
          frame165.style.backgroundColor = '#C3DBFF';
          frame167.style.backgroundColor = '#C3DBFF';
        } else {
          cardElement.style.backgroundColor = 'white';
          frame165.style.backgroundColor = 'white';
          frame167.style.backgroundColor = 'white';
        }
      }

      // Add event listeners to the toggle switches
      const switches = document.querySelectorAll(
        '.switch input[type="checkbox"]'
      );

      switches.forEach((switchElement, index) => {
        switchElement.addEventListener('change', function () {
          const isChecked = this.checked;
          const statusElement = document.getElementById(
            `status-device${index + 1}`
          );

          if (isChecked) {
            statusElement.textContent = 'ON';
            updateCardBackground(this, true);
          } else {
            statusElement.textContent = 'OFF';
            updateCardBackground(this, false);
          }
        });
      });
    </script>
  </body>
</html>
